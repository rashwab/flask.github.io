<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <title>Welcome</title>
</head>
<body>
    <div class="d-flex justify-content-center align-items-center min-vh-100">
        <div class="text-center">
            <h1 class="mb-3">Congratulations{{ ' ' + username if username else '' }}!</h1>
            <p class="mb-4 text-muted">You're now signed in.</p>

            <!-- Prefer a local file `static/congrats.gif`. If missing, show a link to the Tenor page. -->
            <img id="congratsImg" src="{{ url_for('static', filename='oia-uia.gif') }}" alt="Congratulations" class="img-fluid rounded shadow-lg" style="max-width:480px;">
            <div id="congratsFallback" class="mt-3" style="display:none;">
                <p class="text-muted">If the animation doesn't appear, open it on Tenor:</p>
                <a href="https://tenor.com/en-GB/view/oia-uia-oia-cat-uia-cat-catcultclassics-gif-12805916815008299407" target="_blank" rel="noopener" class="btn btn-outline-light">Open GIF on Tenor</a>
            </div>

            <div class="mt-4">
                <a href="{{ url_for('login') }}" class="btn btn-outline-light me-2">Home</a>
                <a href="{{ url_for('register') }}" class="btn btn-light">Register another</a>
            </div>
        </div>
    </div>

    <script>
        // If the local GIF fails to load, show the fallback link
        (function(){
            const img = document.getElementById('congratsImg');
            const fallback = document.getElementById('congratsFallback');
            img.addEventListener('error', ()=>{
                img.style.display = 'none';
                fallback.style.display = 'block';
            });
            // also handle zero-size images (some servers return empty responses)
            img.addEventListener('load', ()=>{
                if(!img.naturalWidth || img.naturalWidth === 0){
                    img.style.display = 'none';
                    fallback.style.display = 'block';
                }
            });
        })();
    </script>
    <script src="{{ url_for('static', filename='script.js') }}"></script>
</body>
</html>
